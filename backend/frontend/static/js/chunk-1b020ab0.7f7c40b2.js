(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b020ab0"],{"101f":function(t,e,a){},3530:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("LeftNav",{staticClass:"col s2",attrs:{currentPage:t.currentPage},on:{"change-page":t.changePage}}),a("keep-alive",[a(t.currentPage,{tag:"component",staticClass:"col s10 offset-s2"})],1)],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"main_block"},[a("span",{staticClass:"header-block"},[t._v("Управление системой")]),a("table",[t._m(0),a("tr",[a("td",[a("a",{staticClass:"waves-effect waves-light btn grey-button text-on-white",on:{click:t.updatePuppet}},[t._v("Puppet")])]),a("td",[a("a",{staticClass:"waves-effect waves-light btn yellow-button text-on-white",on:{click:t.updateDallasLock}},[t._v("Dallas Lock")])]),a("td",[a("a",{staticClass:"waves-effect waves-light btn green-button text-on-white",on:{click:t.updateActiveDirectoryComputers}},[t._v("AD Компьютеры")])]),a("td",[a("a",{staticClass:"waves-effect waves-light btn red-button text-on-white",on:{click:t.updateKaspersky}},[t._v("Касперский")])])]),a("tr",[a("td",{attrs:{colspan:"4"}},[a("a",{staticClass:"waves-effect waves-light white-button btn text-on-white",on:{click:t.updateAllComputers}},[t._v("Обновить все компьютеры")])])]),a("tr",[a("td",{attrs:{colspan:"2"}},[a("a",{staticClass:"waves-effect waves-light btn grey-button text-on-white",on:{click:t.updateStructure}},[t._v("Структуру")])]),a("td",{attrs:{colspan:"2"}},[a("a",{staticClass:"waves-effect waves-light btn green-button text-on-white",on:{click:t.updateActiveDirectoryUsers}},[t._v("AD пользователи")])])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{attrs:{colspan:"4"}},[t._v("Обновить статистику по: ")])])}],c={name:"MainControl",methods:{updateAllComputers:function(){this.$http({url:"/api/update/computers",method:"POST",withCredentials:!0}).then((function(t){console.log(t)}))},updateKaspersky:function(){this.$http({url:"/api/update/kaspersky",method:"POST",withCredentials:!0}).then((function(t){console.log(t)}))},updateActiveDirectoryComputers:function(){this.$http({url:"/api/update/ad/computers",method:"POST",withCredentials:!0}).then((function(t){console.log(t)}))},updateActiveDirectoryUsers:function(){this.$http({url:"/api/update/ad/users",method:"POST",withCredentials:!0}).then((function(t){console.log(t)}))},updateStructure:function(){this.$http({url:"/api/update/reset/structure",method:"POST",withCredentials:!0}).then((function(t){console.log(t)}))},updatePuppet:function(){this.$http({url:"/api/update/puppet",method:"POST",withCredentials:!0}).then((function(t){console.log(t)}))},updateDallasLock:function(){this.$http({url:"/api/update/dallas",method:"POST",withCredentials:!0}).then((function(t){console.log(t)}))}}},o=c,l=(a("6d98"),a("2877")),u=Object(l["a"])(o,i,r,!1,null,"a40b4e86",null),f=u.exports,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"sidenav self-over-background text-on-black",attrs:{id:"admin-sidenav"}},[a("li",[a("div",[a("h1",{staticClass:"center-align"},[a("router-link",{staticClass:"brand-logo general-text-color",attrs:{to:"/"}},[a("img",{staticClass:"general-text-color",attrs:{src:t.logo_img,alt:"SC"}})])],1)])]),a("li",[a("a",{staticClass:"admin-tab waves-effect active",attrs:{href:"MainControl"},on:{click:function(e){return e.preventDefault(),t.changePage(e)}}},[a("i",{staticClass:"material-icons text-on-black"},[t._v("computer")]),t._v("Панель управления")])]),a("li",[a("a",{staticClass:"admin-tab waves-effect",attrs:{href:"UsersControl"},on:{click:function(e){return e.preventDefault(),t.changePage(e)}}},[a("i",{staticClass:"material-icons text-on-black"},[t._v("person")]),t._v("Пользователи")])]),t._m(0),t._m(1),a("li",[a("a",{staticClass:"admin-tab waves-effect",attrs:{href:"UpdateLogs"},on:{click:function(e){return e.preventDefault(),t.changePage(e)}}},[t._v("Обновления")])]),a("li",[a("a",{staticClass:"admin-tab waves-effect",attrs:{href:"InternalLogs"},on:{click:function(e){return e.preventDefault(),t.changePage(e)}}},[t._v("Внутренние ошибки сервера")])]),t._m(2),t._m(3),a("li",[a("a",{staticClass:"admin-tab waves-effect",attrs:{href:"ComputersStatistics"},on:{click:function(e){return e.preventDefault(),t.changePage(e)}}},[t._v("Общая статистика")])]),a("li",[a("a",{staticClass:"admin-tab waves-effect",attrs:{href:"KasperskyStatistics"},on:{click:function(e){return e.preventDefault(),t.changePage(e)}}},[t._v("Тут должна быть статистика")])])])},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("div",{staticClass:"divider general-color"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{staticClass:"subheader text-on-black"},[a("i",{staticClass:"material-icons text-on-black"},[t._v("storage")]),t._v("Логи")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("div",{staticClass:"divider general-color"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{staticClass:"subheader text-on-black"},[a("i",{staticClass:"material-icons text-on-black"},[t._v("poll")]),t._v("Статистика")])])}],m=(a("4160"),a("a630"),a("caad"),a("2532"),a("3ca3"),a("159b"),a("3777")),v=a.n(m),p={name:"LeftNav",components:{},data:function(){return{tabs:void 0,logo_img:v.a}},props:["currentPage"],methods:{clearActive:function(){this.tabs.forEach((function(t){Array.from(t.classList).includes("active")&&t.classList.remove("active")}))},changeActiveTab:function(t){this.clearActive(),t.classList.add("active")},changePage:function(t){this.changeActiveTab(t.target),this.$emit("change-page",t.target.attributes.href.value)}},mounted:function(){var t=document.getElementsByClassName("admin-tab");this.tabs=Array.from(t)}},g=p,_=(a("a141"),Object(l["a"])(g,d,h,!1,null,"deae0d9e",null)),b=_.exports,C=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},w=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("ComputerStatistics")])])}],k={name:"ComputersStatistics",mounted:function(){}},P=k,$=Object(l["a"])(P,C,w,!1,null,"a6ca60f4",null),x=$.exports,D=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},E=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("UpdateLogs")])])}],y={name:"UpdateLogs"},S=y,L=Object(l["a"])(S,D,E,!1,null,"0f65faa3",null),O=L.exports,A=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},M=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("InternalLogs")])])}],T={name:"InternalLogs",mounted:function(){}},U=T,j=Object(l["a"])(U,A,M,!1,null,"4b9661ea",null),H=j.exports,K=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("KasperskyStatistics")])])}],I={name:"KasperskyStatistics"},N=I,z=Object(l["a"])(N,K,Y,!1,null,"8c31b61e",null),F=z.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("br"),a("div",{ref:"users_table"}),a("br")])},B=[],G=a("c1df"),q=a.n(G),Q=a("e325"),R={name:"UsersControl",data:function(){return{users:[],tabulator:void 0}},mounted:function(){var t=this;this.$http({url:"/api/users/ad",method:"GET",withCredentials:!0}).then((function(e){if(200===e.status){var a=t;t.users=e.data.data.users,t.users.forEach((function(e){e.registred=t.showDate(e.registred),e.last_logon=t.showDate(e.last_logon)})),t.tabulator=new Q["a"](t.$refs.users_table,{data:a.users,layout:"fitColumns",tooltips:!0,pagination:"local",index:"name",paginationSize:25,initialSort:[{column:"name",dir:"asc"}],rowContextMenu:[{label:"Hide Column",action:function(t,e){e.hide()}},{separator:!0},{disabled:!0,label:"Move Column",action:function(t,e){e.move("col")}}],columns:[{title:"№",formatter:"rownum",width:49,sorter:!1,editor:!1},{title:"Полное имя",field:"full_name",sorter:"string",headerFilter:!0},{title:"Логин",field:"name",align:"center",sorter:"string"},{title:"Подразделение",field:"department",align:"center",sorter:"string"},{title:"Почта",field:"mail",align:"center",sorter:"string"},{title:"Телефон",field:"phone",align:"center",sorter:"string"},{title:"Создан",field:"registred",align:"center",formatter:"datetime",formatterParams:{outputFormat:"DD/MM/YY HH:mm",timezone:"Europe/Moscow",invalidPlaceholder:"-"}},{title:"Последний вход",field:"last_logon",align:"center",formatter:"datetime",formatterParams:{outputFormat:"DD/MM/YY HH:mm",timezone:"Europe/Moscow",invalidPlaceholder:"-"}}]})}}))},beforeDestroy:function(){this.tabulator.destroy(),this.users.length=0},methods:{showDate:function(t){return q()(t).format("DD/MM/YY HH:mm")}}},V=R,W=Object(l["a"])(V,J,B,!1,null,"5bd14f3c",null),X=W.exports,Z={components:{LeftNav:b,MainControl:f,ComputersStatistics:x,UpdateLogs:O,InternalLogs:H,KasperskyStatistics:F,UsersControl:X},data:function(){return{currentPage:"MainControl"}},methods:{changePage:function(t){this.currentPage=t}},mounted:function(){}},tt=Z,et=(a("7db1"),Object(l["a"])(tt,n,s,!1,null,"08e9b843",null));e["default"]=et.exports},"6d98":function(t,e,a){"use strict";a("101f")},"7db1":function(t,e,a){"use strict";a("cb4f")},a141:function(t,e,a){"use strict";a("bfcd")},bfcd:function(t,e,a){},cb4f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1b020ab0.7f7c40b2.js.map